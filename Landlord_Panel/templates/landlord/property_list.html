{% block content %}
<div class="container-fluid mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold">üè† Property List</h2>
        <a href="{% url 'property_add' %}" class="btn btn-success shadow-sm">
            ‚ûï Add New Property
        </a>
    </div>

    <div class="card shadow-sm">
        <div class="card-body p-0">
            <div class="table-responsive" style="max-height: 600px; overflow-y: auto;">
                <table class="table table-hover table-bordered align-middle text-center">
                    <thead class="table-dark sticky-top">
                        <tr>
                            <th>ID</th>
                            <th>Title</th>
                            <th>City</th>
                            <th>Area</th>
                            <th>Address</th>
                            <th>Type</th>
                            <th>Built-up Area</th>
                            <th>Carpet Area</th>
                            <th>Zone</th>
                            <th>Society Type</th>
                            <th>Recommended For</th>
                            <th>Bedrooms</th>
                            <th>Bathrooms</th>
                            <th>Balconies</th>
                            <th>Furnishing</th>
                            <th>Floor No</th>
                            <th>Total Floors</th>
                            <th>Age</th>
                            <th>Water Type</th>
                            <th>Rent Price</th>
                            <th>Security Deposit</th>
                            <th>Maintenance</th>
                            <th>Brokerage Type</th>
                            <th>Manual Rent</th>
                            <th>Manual Fixed</th>
                            <th>Featured</th>
                            <th>Featured Days</th>
                            <th>Manual Featured Days</th>
                            <th>Featured Start Date</th>
                            <th>Featured End Date</th>
                            <th>Service Amount</th>
                            <th>Placement</th>
                            <th>Verified</th>
                            <th>Exclusive Property</th>
                            <th>Property Images</th>
                            <th>Floor Plan</th>
                            <th>Registry Copy</th>
                            <th>House Tax</th>
                            <th>Utility Bill</th>
                            <th>Aadhar</th>
                            <th>PAN</th>
                            <th>Index2</th>
                            <th>Nearby Facilities</th>
                            <th>Amenities</th>
                              <th>Video video url</th>
                            <th>Video Upload</th>
                            <th>Video Platforms</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for property in properties %}
                        <tr>
                            <td>{{ property.id }}</td>
                            <td><strong>{{ property.property_title }}</strong></td>
                            <td>{{ property.city }}</td>
                            <td>{{ property.area }}</td>
                            <td><small>{{ property.property_address }}</small></td>
                            <td>{{ property.property_type }}</td>
                            <td>{{ property.builtup_area }}</td>
                            <td>{{ property.carpet_area }}</td>
                            <td>{{ property.zone }}</td>
                            <td>{{ property.society_type }}</td>
                            <td>{{ property.recommended_for }}</td>
                            <td>{{ property.bedrooms }}</td>
                            <td>{{ property.bathrooms }}</td>
                            <td>{{ property.balconies }}</td>
                            <td>{{ property.furnishing }}</td>
                            <td>{{ property.floor_no }}</td>
                            <td>{{ property.total_floors }}</td>
                            <td>{{ property.age_of_property }}</td>
                            <td>{{ property.water_type }}</td>
                            <td class="fw-bold text-success">‚Çπ {{ property.rent_price }}</td>
                            <td>{{ property.security_deposit }}</td>
                            <td>{{ property.maintenance }}</td>
                            <td>{{ property.brokerage_type }}</td>
                            <td>{{ property.manual_rent }}</td>
                            <td>{{ property.manual_fixed }}</td>
                            <td>{{ property.is_featured }}</td>
                            <td>{{ property.featured_days }}</td>
                            <td>{{ property.manual_featured_days }}</td>
                            <td>{{ property.featured_start_date }}</td>
                            <td>{{ property.featured_end_date }}</td>
                            <td>{{ property.service_amount }}</td>
                            <td>{{ property.placement }}</td>
                            <td>{{ property.is_verified }}</td>
                            <td>{{ property.exclusive_property|yesno:"‚úîÔ∏è,‚ùå" }}</td>

                            <!-- File Links -->
                            <td>{% if property.property_images %}<a href="{{ property.property_images.url }}" target="_blank" class="btn btn-sm btn-outline-primary">View</a>{% else %}<span class="text-muted">‚Äî</span>{% endif %}</td>
                            <td>{% if property.floor_plan %}<a href="{{ property.floor_plan.url }}" target="_blank" class="btn btn-sm btn-outline-primary">View</a>{% else %}<span class="text-muted">‚Äî</span>{% endif %}</td>
                            <td>{% if property.upload_registry %}<a href="{{ property.upload_registry.url }}" target="_blank" class="btn btn-sm btn-outline-primary">View</a>{% else %}<span class="text-muted">‚Äî</span>{% endif %}</td>
                            <td>{% if property.upload_house_tax %}<a href="{{ property.upload_house_tax.url }}" target="_blank" class="btn btn-sm btn-outline-primary">View</a>{% else %}<span class="text-muted">‚Äî</span>{% endif %}</td>
                            <td>{% if property.upload_utility_bill %}<a href="{{ property.upload_utility_bill.url }}" target="_blank" class="btn btn-sm btn-outline-primary">View</a>{% else %}<span class="text-muted">‚Äî</span>{% endif %}</td>
                            <td>{% if property.upload_aadhar %}<a href="{{ property.upload_aadhar.url }}" target="_blank" class="btn btn-sm btn-outline-primary">View</a>{% else %}<span class="text-muted">‚Äî</span>{% endif %}</td>
                            <td>{% if property.upload_pan %}<a href="{{ property.upload_pan.url }}" target="_blank" class="btn btn-sm btn-outline-primary">View</a>{% else %}<span class="text-muted">‚Äî</span>{% endif %}</td>
                            <td>{% if property.upload_index2 %}<a href="{{ property.upload_index2.url }}" target="_blank" class="btn btn-sm btn-outline-primary">View</a>{% else %}<span class="text-muted">‚Äî</span>{% endif %}</td>

                            <td><span class="badge bg-warning text-dark">{{ property.nearby_facilities }}</span></td>
                            <td><span class="badge bg-info text-dark">{{ property.amenities }}</span></td>
                              <td>{{ property.video_url }}</td>
                            <td>{{ property.upload_video|yesno:"üé•,‚ùå" }}</td>
                            <td>{{ property.video_platforms }}</td>

                            <!-- Actions -->
                            <td>
                                <a href="{% url 'property_edit' property.id %}" class="btn btn-sm btn-warning">‚úèÔ∏è Edit</a>
                                <a href="{% url 'property_delete' property.id %}" class="btn btn-sm btn-danger"
                                   onclick="return confirm('Are you sure you want to delete this property?');">üóë Delete</a>
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="48" class="text-center text-muted py-3">No properties found.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}
