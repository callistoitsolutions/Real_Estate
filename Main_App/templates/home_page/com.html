
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Commercial Property Listing — Smart Form</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    :root{
      --accent-1: linear-gradient(135deg,#4f46e5 0%,#06b6d4 100%);
      --card-glow: 0 10px 30px rgba(6,178,212,0.12);
      --muted: #6b7280;
      --rounded: 14px;
    }

    body{ background: linear-gradient(180deg,#f8fafc 0%, #eef2ff 100%); font-family: Inter, system-ui, Arial; color:#0f172a; }

    /* Hero */
    .hero{
      background: var(--accent-1);
      color:white;
      border-radius: 20px;
      padding: 28px;
      box-shadow: 0 10px 30px rgba(79,70,229,0.18);
      margin-bottom: 24px;
    }
    .hero h1{ font-weight:700; margin-bottom:6px; letter-spacing:-0.4px; }
    .hero p{ color: rgba(255,255,255,0.9); margin-bottom:0; }

    /* Progress */
    .progress-steps{ display:flex; gap:8px; align-items:center; margin-bottom:18px; }
    .step-dot{ width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center; background:#fff2; color:white; font-weight:600; box-shadow:0 4px 12px rgba(2,6,23,0.08); }
    .step-dot.active{ background: rgba(255,255,255,0.15); border:2px solid rgba(255,255,255,0.25); }
    .progress-bar-bg{ height:8px; background: rgba(255,255,255,0.12); border-radius:999px; overflow:hidden; flex:1 1 auto;}
    .progress-bar-fill{ height:100%; background:rgba(255,255,255,0.9); width:0%; border-radius:999px; transition:width .4s ease; }

    /* Form cards */
    .card.custom{ border: none; border-radius: var(--rounded); box-shadow: var(--card-glow); overflow:visible; }
    .card .card-header{ background: linear-gradient(90deg,#0ea5e9,#7c3aed); color:white; font-weight:700; border-top-left-radius:14px; border-top-right-radius:14px; }
    label.required::after{ content:" *"; color:#ef4444; font-weight:600; margin-left:2px; }

    .form-step{ display:none; animation:fadeIn .35s ease both; }
    .form-step.active{ display:block; }

    .controls { display:flex; gap:10px; justify-content:space-between; margin-top:18px; }
    .btn-ghost { background:transparent; border:1px solid rgba(15,23,42,0.06); }

    /* preview thumbnails */
    .thumbs { display:flex; gap:8px; flex-wrap:wrap; margin-top:10px; }
    .thumb { width:84px; height:64px; border-radius:6px; overflow:hidden; border:1px solid #e6edf3; display:flex; align-items:center; justify-content:center; background:#f8fafc; }
    .thumb img{ width:100%; height:100%; object-fit:cover; }

    /* small screens tweaks */
    @media (max-width:767px){
      .hero{ padding:16px; border-radius:12px; }
    }

    @keyframes fadeIn{ from{ opacity:0; transform:translateY(6px);} to{opacity:1; transform:none;} }
  </style>
</head>
<body>
  <div class="container my-5">
    <div class="hero d-flex flex-column flex-md-row align-items-md-center justify-content-between mb-4">
      <div>
        <h1 class="mb-1">Commercial Property Listing</h1>
        <p class="mb-0">Smart, colorful, and dynamic form — add property details in a few quick steps.</p>
      </div>
      <div class="mt-3 mt-md-0 d-flex align-items-center gap-3">
        <button class="btn btn-light btn-sm" id="saveDraft"><i class="bi bi-save"></i> Save draft</button>
        <button class="btn btn-white btn-sm" id="helpBtn"><i class="bi bi-question-circle"></i></button>
      </div>
    </div>

    <!-- Progress -->
    <div class="d-flex align-items-center mb-3">
      <div class="progress-steps me-3">
        <div class="step-dot active" data-step="0"><i class="bi bi-info-lg"></i></div>
        <div class="step-dot" data-step="1"><i class="bi bi-currency-rupee"></i></div>
        <div class="step-dot" data-step="2"><i class="bi bi-check2-circle"></i></div>
      </div>
      <div class="progress-bar-bg" aria-hidden>
        <div class="progress-bar-fill" id="progressFill" style="width:0%"></div>
      </div>
    </div>

    <form id="multiStepForm" method="POST" enctype="multipart/form-data" novalidate>
      {% csrf_token %}

      <!-- STEP 1 -->
      <div class="form-step active" data-step="0">
        <div class="card custom mb-3">
          <div class="card-header">Property Basic Details</div>
          <div class="card-body">
            <div class="row g-3">
              <div class="col-md-4">
                <label class="form-label required">Title Of Property</label>
                <select class="form-select" name="property_type" required>
                  <option value="">Select Type</option>
                  <option>Office</option>
                  <option>Retail Shop</option>
                  <option>Showroom</option>
                  <option>Warehouse</option>
                  <option>Plot</option>
                  <option>Others</option>
                </select>
              </div>
              <div class="col-md-4">
                <label class="form-label required">City</label>
                <input type="text" class="form-control" name="city" placeholder="e.g. Nagpur" required>
              </div>
              <div class="col-md-4">
                <label class="form-label required">Area/Locality</label>
                <input type="text" class="form-control" name="area_locality" placeholder="e.g. Manish Nagar T Point Nagpur" required>
              </div>

              <div class="col-12">
                <label class="form-label required">Property Address</label>
                <textarea class="form-control" name="property_address" rows="2" placeholder="e.g., Medical Square, Near VR Mall, Nagpur" required></textarea>
              </div>

              <div class="col-md-4">
                <label class="form-label required">Building/Project/Society Name</label>
                <input type="text" class="form-control" name="building_name" placeholder="e.g. ABC Towers" required>
              </div>

              <div class="col-md-4">
                <label class="form-label required">Possession Status</label>
                <select class="form-select" name="possession_status" required>
                  <option value="">Select Type</option>
                  <option>Ready to move</option>
                  <option>Under construction</option>
                </select>
              </div>

              <div class="col-md-4">
                <label class="form-label required">Age Of Property (Years)</label>
                <input type="number" min="0" class="form-control" name="age_of_property" placeholder="e.g. 2" required>
              </div>

              <div class="col-md-4">
                <label class="form-label required">Zone Type</label>
                <select class="form-select" name="zone_type" required>
                  <option value="">Select</option>
                  <option>Industrial</option>
                  <option>Commercial</option>
                  <option>Residential</option>
                  <option>SEZ</option>
                  <option>Agricultural</option>
                </select>
              </div>

              <div class="col-md-4">
                <label class="form-label required">Location Hub</label>
                <input type="text" class="form-control" name="location_hub" placeholder="">
              </div>

              <div class="col-md-4">
                <label class="form-label required">Property Condition</label>
                <select class="form-select" name="property_condition" required>
                  <option value="">Select</option>
                  <option>Ready to use</option>
                  <option>Bare shell</option>
                </select>
              </div>

              <div class="col-md-4">
                <label class="form-label required">Ownership Type</label>
                <select class="form-select" name="ownership_type" required>
                  <option value="">Select Type</option>
                  <option>Freehold</option>
                  <option>Leasehold</option>
                  <option>Cooperative society</option>
                  <option>Power of attorney</option>
                </select>
              </div>

              <div class="col-md-4">
                <label class="form-label required">Construction Status</label>
                <select class="form-select" name="construction_status" required>
                  <option value="">Select</option>
                  <option>No walls</option>
                  <option>Brick walls</option>
                  <option>Plastered walls</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="card custom mb-3">
          <div class="card-header">Property Details</div>
          <div class="card-body">
            <div class="row g-3">
              <div class="col-md-4">
                <label class="form-label required">Built-up Area (sq.ft)</label>
                <input type="number" min="0" class="form-control" name="builtup_area" placeholder="e.g. 1200" required>
              </div>
              <div class="col-md-4">
                <label class="form-label required">Carpet Area (sq.ft)</label>
                <input type="number" min="0" class="form-control" name="carpet_area" placeholder="e.g. 600" required>
              </div>
              <div class="col-md-4">
                <label class="form-label required">Total Floors</label>
                <input type="number" min="0" class="form-control" name="total_floors" placeholder="e.g. 6" required>
              </div>

              <div class="col-md-4">
                <label class="form-label required">Floor No</label>
                <input type="number" min="0" class="form-control" name="your_no" placeholder="e.g. 2" required>
              </div>

              <div class="col-md-4">
                <label class="form-label required">No Of Staircase</label>
                <input type="number" min="0" class="form-control" name="no_of_staircase" placeholder="e.g. 2" required>
              </div>

              <div class="col-md-4">
                <label class="form-label required">Passenger Lifts</label>
                <input type="number" min="0" class="form-control" name="passenger_lifts" placeholder="e.g. 2" required>
              </div>

              <div class="col-md-4">
                <label class="form-label required">Service Lifts</label>
                <input type="number" min="0" class="form-control" name="service_lifts" placeholder="e.g. 2" required>
              </div>

              <div class="col-md-4">
                <label class="form-label required">Private Parking</label>
                <input type="number" min="0" class="form-control" name="private_parking" placeholder="e.g. 2" required>
              </div>

              <div class="col-md-4">
                <label class="form-label required">Public Parking</label>
                <input type="number" min="0" class="form-control" name="public_parking" placeholder="e.g. 2" required>
              </div>

              <div class="col-md-4">
                <label class="form-label">Minimum Seats</label>
                <input type="number" min="0" class="form-control" name="minimum_seats" placeholder="e.g. 2">
              </div>

              <div class="col-md-4">
                <label class="form-label">Maximum Seats</label>
                <input type="number" min="0" class="form-control" name="maximum_seats" placeholder="e.g. 10">
              </div>

              <div class="col-md-4">
                <label class="form-label">No. Of Cabin</label>
                <input type="number" min="0" class="form-control" name="number_of_cabin" placeholder="e.g. 3">
              </div>

              <div class="col-md-4">
                <label class="form-label">Meeting Room</label>
                <input type="number" min="0" class="form-control" name="meeting_room" placeholder="e.g. 1">
              </div>

              <div class="col-md-4">
                <label class="form-label required">Flooring Type</label>
                <select class="form-select" name="floring_type" required>
                  <option value="">Select Type</option>
                  <option>Marble</option>
                  <option>Concrete</option>
                  <option>Granite</option>
                  <option>Ceramic</option>
                  <option>Cement</option>
                  <option>Others</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="controls">
          <div></div>
          <div>
            <button type="button" class="btn btn-success" id="nextBtn">Next <i class="bi bi-arrow-right ms-1"></i></button>
          </div>
        </div>
      </div>

      <!-- STEP 2 -->
      <div class="form-step" data-step="1">
        <div class="card custom mb-3">
          <div class="card-header">Rent Details</div>
          <div class="card-body">
            <div class="row g-3">
              <div class="col-md-4">
                <label class="form-label required">Expected Rent (₹)</label>
                <input type="number" min="0" class="form-control" name="expected_rent" placeholder="e.g. 1200" required>
              </div>
              <div class="col-md-4">
                <label class="form-label required">Security Deposit (₹)</label>
                <input type="number" min="0" class="form-control" name="security_deposit" placeholder="e.g. 2000" required>
              </div>
              <div class="col-md-4">
                <label class="form-label">Maintenance Charges (₹)</label>
                <input type="number" min="0" class="form-control" name="maintenance_charges" placeholder="e.g. 1200">
              </div>

              <div class="col-md-4">
                <label class="form-label required">Available From</label>
                <input type="date" class="form-control" name="available_from" required>
              </div>

              <div class="col-md-4">
                <label class="form-label required">Lock In Period (Months)</label>
                <input type="number" min="0" class="form-control" name="lock_in_period" placeholder="e.g. 3" required>
              </div>

              <div class="col-md-4">
                <label class="form-label">Expected Rent Increase (%)</label>
                <input type="number" step="0.01" class="form-control" name="rent_increase" placeholder="e.g. 3">
              </div>
            </div>
          </div>
        </div>

        <div class="card custom mb-3">
          <div class="card-header">Upload Property Images & Documents</div>
          <div class="card-body">
            <div class="row g-3 align-items-end">
              <div class="col-md-6">
                <label class="form-label required">Upload Property Images</label>
                <input type="file" class="form-control" id="property_images" name="property_images" accept="image/*" multiple>
                <div class="thumbs" id="imageThumbs" aria-hidden></div>
              </div>

              <div class="col-md-6">
                <label class="form-label required">Upload Floor Plan (PDF/JPG)</label>
                <input type="file" class="form-control" name="floor_plan" accept=".pdf,image/*">
              </div>
            </div>
          </div>
        </div>

        <div class="card custom mb-3">
          <div class="card-header">Featured & Verified Property</div>
          <div class="card-body">
            <div class="row g-3">
              <div class="col-md-4">
                <label class="form-label">Featured</label>
                <select id="featuredSelect" class="form-select" name="is_featured">
                  <option value="">Select Type</option>
                  <option value="No">No</option>
                  <option value="Yes">Yes</option>
                </select>
              </div>

              <div class="col-md-4" id="featuredDaysSelect" style="display:none;">
                <label class="form-label">No. of Days (Select)</label>
                <select class="form-select" id="daysSelect" name="featured_days">
                  <option value="">Select Days</option>
                  <option value="7">7 Days</option>
                  <option value="15">15 Days</option>
                  <option value="30">30 Days</option>
                </select>
              </div>

              <div class="col-md-4">
                <label class="form-label">Enter Days Manually</label>
                <input type="number" min="0" id="manualDays" class="form-control" name="manual_featured_days" placeholder="Enter number of days">
              </div>

              <div class="col-md-4">
                <label class="form-label">Featured Start Date</label>
                <input type="date" id="startDate" class="form-control" name="featured_start_date">
              </div>

              <div class="col-md-4">
                <label class="form-label">Featured End Date</label>
                <input type="date" id="endDate" class="form-control" name="featured_end_date" readonly>
              </div>

              <div class="col-md-4">
                <label class="form-label">Service Amount (₹)</label>
                <input type="number" min="0" class="form-control" id="serviceAmount" name="service_amount" placeholder="">
              </div>

              <div class="col-md-4">
                <label class="form-label">Placement</label>
                <select class="form-select" name="placement">
                  <option value="">Select</option>
                  <option value="Homepage">Homepage</option>
                  <option value="Sidebar">Sidebar</option>
                  <option value="Listing Top">Listing Top</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="controls">
          <button type="button" class="btn btn-secondary prevBtn"><i class="bi bi-arrow-left"></i> Previous</button>
          <button type="button" class="btn btn-success nextBtn">Next <i class="bi bi-arrow-right ms-1"></i></button>
        </div>
      </div>

      <!-- STEP 3 -->
      <div class="form-step" data-step="2">
        <div class="card custom mb-3">
          <div class="card-header">Verified Property</div>
          <div class="card-body">
            <div class="row g-3">
              <div class="col-md-4">
                <label class="form-label">Verified Property?</label>
                <select class="form-select" id="verifiedProperty" name="is_verified">
                  <option value="no">No</option>
                  <option value="yes">Yes (Upload Following Documents)</option>
                </select>
              </div>
            </div>

            <div id="documents-section" style="display:none; margin-top:14px;">
              <div class="row g-3">
                <div class="col-md-4">
                  <label class="form-label">Registry Copy / Sale Deed</label>
                  <input class="form-control" type="file" name="upload_registry">
                </div>
                <div class="col-md-4">
                  <label class="form-label">House Tax Receipt</label>
                  <input class="form-control" type="file" name="upload_house_tax">
                </div>
                <div class="col-md-4">
                  <label class="form-label">Electricity Bill / Water Bill</label>
                  <input class="form-control" type="file" name="upload_utility_bill">
                </div>

                <div class="col-md-4">
                  <label class="form-label">Aadhar Card of Owner</label>
                  <input class="form-control" type="file" name="upload_aadhar">
                </div>
                <div class="col-md-4">
                  <label class="form-label">PAN Card / Govt ID</label>
                  <input class="form-control" type="file" name="upload_pan">
                </div>
                <div class="col-md-4">
                  <label class="form-label">Latest “Aakhiv Patrika” / Index 2</label>
                  <input class="form-control" type="file" name="upload_index2">
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="card custom mb-3">
          <div class="card-header">Brokerage Details</div>
          <div class="card-body">
            <div class="row g-3 align-items-center">
              <div class="col-md-4">
                <label class="form-label">Brokerage Applicable?</label>
                <div class="d-flex gap-3 mt-2">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="brokerage_applicable" id="brokerageYes" value="Yes">
                    <label class="form-check-label" for="brokerageYes">Yes</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="brokerage_applicable" id="brokerageNo" value="No" checked>
                    <label class="form-check-label" for="brokerageNo">No</label>
                  </div>
                </div>
              </div>

              <div id="brokerageDetails" style="display:none;">
                <div class="row g-3 mt-2">
                  <div class="col-md-4">
                    <label class="form-label">Brokerage Payer</label>
                    <select class="form-select" id="brokeragePayer" name="brokeragePayer">
                      <option value="">-- Select Payer --</option>
                      <option value="Landlord">Landlord</option>
                      <option value="Tenant">Tenant</option>
                      <option value="Broker">Broker</option>
                      <option value="RM">RM</option>
                      <option value="Admin">Admin</option>
                      <option value="SuperAdmin">Super Admin</option>
                    </select>
                  </div>
                  <div class="col-md-4">
                    <label class="form-label">Brokerage Type</label>
                    <select class="form-select" id="brokerageType" name="brokerageType">
                      <option value="">-- Select Type --</option>
                      <option value="Monthly Rent">Monthly Rent</option>
                      <option value="Percentage">Percentage (%)</option>
                      <option value="Fixed Amount">Fixed Amount</option>
                    </select>
                  </div>
                  <div class="col-md-4" id="brokerageValueDiv">
                    <label class="form-label">Brokerage Value</label>
                    <input type="number" step="0.01" min="0" class="form-control" id="brokerageValue" name="brokerageValue" placeholder="Enter amount or %">
                  </div>
                  <div class="col-md-4" id="percentageExtraDiv" style="display:none;">
                    <label class="form-label">Extra Field for %</label>
                    <input type="number" step="0.01" min="0" class="form-control" id="percentageExtra" name="percentageExtra" placeholder="Enter extra % details">
                  </div>
                  <div class="col-12">
                    <label class="form-label">Brokerage Description (Optional)</label>
                    <textarea class="form-control" id="brokerageDescription" name="brokerageDescription"></textarea>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="card custom mb-3">
          <div class="card-header">Upload Video Details</div>
          <div class="card-body">
            <div class="row g-3 align-items-center">
              <div class="col-md-4">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="upload_video" name="upload_video">
                  <label class="form-check-label" for="upload_video">Do you want to upload a video?</label>
                </div>
              </div>

              <div id="videoSection" style="display:none; margin-top:10px;">
                <div class="col-12">
                  <label class="form-label">Video URL</label>
                  <input type="url" class="form-control" id="video_url" name="video_url" placeholder="Enter video URL">
                </div>

                <div class="col-12 d-flex flex-wrap gap-3 mt-2">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="video_platforms[]" value="YouTube" id="platformYoutube">
                    <label class="form-check-label" for="platformYoutube">YouTube</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="video_platforms[]" value="Instagram" id="platformInstagram">
                    <label class="form-check-label" for="platformInstagram">Instagram</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="video_platforms[]" value="Facebook" id="platformFacebook">
                    <label class="form-check-label" for="platformFacebook">Facebook</label>
                  </div>
                </div>

                <div class="col-md-6 mt-3">
                  <label class="form-label">From Date</label>
                  <input type="date" class="form-control" id="video_from" name="video_from">
                </div>
                <div class="col-md-6 mt-3">
                  <label class="form-label">To Date</label>
                  <input type="date" class="form-control" id="video_to" name="video_to">
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="card custom mb-3">
          <div class="card-header">Exclusive Property Details</div>
          <div class="card-body">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="exclusive_property" name="exclusive_property">
              <label class="form-check-label" for="exclusive_property">Exclusive Property</label>
            </div>
          </div>
        </div>

        <div class="card custom mb-3">
          <div class="card-header">Nearby Facilities & Amenities</div>
          <div class="card-body">
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">Nearby Facilities</label>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="nearby_facilities[]" value="School" id="facilitySchool"><label class="form-check-label" for="facilitySchool">School</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="nearby_facilities[]" value="Hospital" id="facilityHospital"><label class="form-check-label" for="facilityHospital">Hospital</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="nearby_facilities[]" value="Market" id="facilityMarket"><label class="form-check-label" for="facilityMarket">Market</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="nearby_facilities[]" value="Metro" id="facilityMetro"><label class="form-check-label" for="facilityMetro">Metro</label></div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Amenities</label>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="amenities[]" value="Gym" id="amenityGym"><label class="form-check-label" for="amenityGym">Gym</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="amenities[]" value="Swimming Pool" id="amenityPool"><label class="form-check-label" for="amenityPool">Swimming Pool</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="amenities[]" value="Park" id="amenityPark"><label class="form-check-label" for="amenityPark">Park</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="amenities[]" value="Club House" id="amenityClub"><label class="form-check-label" for="amenityClub">Club House</label></div>
              </div>
            </div>
          </div>
        </div>

        <div class="controls">
          <button type="button" class="btn btn-secondary prevBtn"><i class="bi bi-arrow-left"></i> Previous</button>
          <button type="submit" class="btn btn-primary">Submit <i class="bi bi-send ms-1"></i></button>
        </div>
      </div>
    </form>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
(function(){
  // === STEP NAVIGATION ===
  const steps = Array.from(document.querySelectorAll('.form-step'));
  let current = 0;

  const updateUI = () => {
    steps.forEach((s,i) => s.classList.toggle('active', i === current));
    // Progress fill
    const pct = (current) / (steps.length - 1) * 100;
    const fill = document.getElementById('progressFill');
    if (fill) fill.style.width = pct + '%';
    // Step dots
    document.querySelectorAll('.step-dot').forEach(el => {
      el.classList.toggle('active', parseInt(el.dataset.step,10) === current);
    });
    // Scroll to top
    const hero = document.querySelector('.hero');
    if (hero) window.scrollTo({ top: hero.offsetTop - 24, behavior:'smooth' });
  };

  // Buttons
  document.getElementById('nextBtn')?.addEventListener('click', () => {
    if (!validateStep(current)) return;
    current = Math.min(steps.length-1, current + 1);
    updateUI();
  });
  document.querySelectorAll('.nextBtn').forEach(b => b.addEventListener('click', () => {
    if (!validateStep(current)) return;
    current = Math.min(steps.length-1, current + 1);
    updateUI();
  }));
  document.querySelectorAll('.prevBtn').forEach(b => b.addEventListener('click', () => {
    current = Math.max(0, current - 1);
    updateUI();
  }));

  // === VALIDATION ===
  function validateStep(stepIndex){
    const step = steps[stepIndex];
    if (!step) return true;
    const requireds = Array.from(step.querySelectorAll('[required]'));
    for (const el of requireds){
      if (el.type === 'checkbox' || el.type === 'radio') continue;
      if (!el.value){
        el.classList.add('is-invalid');
        el.focus();
        setTimeout(()=> el.classList.remove('is-invalid'), 2200);
        return false;
      }
    }
    return true;
  }

  // === IMAGE PREVIEW THUMBNAILS ===
  const imgInput = document.getElementById('property_images');
  const imgThumbs = document.getElementById('imageThumbs');
  if (imgInput){
    imgInput.addEventListener('change', () => {
      imgThumbs.innerHTML = '';
      const files = Array.from(imgInput.files).slice(0,8);
      files.forEach(file => {
        if (!file.type.startsWith('image/')) return;
        const reader = new FileReader();
        const wrap = document.createElement('div');
        wrap.className = 'thumb';
        reader.onload = e => {
          const img = document.createElement('img');
          img.src = e.target.result;
          wrap.appendChild(img);
        };
        reader.readAsDataURL(file);
        imgThumbs.appendChild(wrap);
      });
    });
  }

  // === FEATURED PROPERTY LOGIC ===
  const featuredSelect = document.getElementById('featuredSelect');
  const featuredDaysSelect = document.getElementById('featuredDaysSelect');
  const daysSelect = document.getElementById('daysSelect');
  const manualDays = document.getElementById('manualDays');
  const startDate = document.getElementById('startDate');
  const endDate = document.getElementById('endDate');

  // Compute and display end date automatically
  const computeEndDate = () => {
    const start = startDate?.value ? new Date(startDate.value) : null;
    const days = Number(manualDays?.value || daysSelect?.value || 0);
    if (!start || !days) {
      if (endDate) endDate.value = '';
      return;
    }
    const out = new Date(start.getTime() + (days * 24 * 60 * 60 * 1000));
    const yyyy = out.getFullYear();
    const mm = String(out.getMonth() + 1).padStart(2,'0');
    const dd = String(out.getDate()).padStart(2,'0');
    if (endDate) endDate.value = `${yyyy}-${mm}-${dd}`;
  };

  // Show/hide featured duration section
  featuredSelect?.addEventListener('change', e => {
    if (featuredDaysSelect)
      featuredDaysSelect.style.display = e.target.value === 'Yes' ? 'block' : 'none';
  });

  // Recalculate end date when inputs change
  startDate?.addEventListener('change', computeEndDate);
  daysSelect?.addEventListener('change', computeEndDate);
  manualDays?.addEventListener('input', computeEndDate);

  // === INITIALIZE ===
  updateUI();

})();
</script>


 <script>
  const uploadVideoCheckbox = document.getElementById('upload_video');
  const videoSection = document.getElementById('videoSection');

  uploadVideoCheckbox.addEventListener('change', function() {
    videoSection.style.display = this.checked ? 'block' : 'none';
  });
</script>

<script>
  // Show/hide brokerage details based on Yes/No
  const brokerageRadios = document.querySelectorAll('input[name="brokerage_applicable"]');
  const brokerageDetails = document.getElementById('brokerageDetails');
  const brokerageType = document.getElementById('brokerageType');
  const percentageExtraDiv = document.getElementById('percentageExtraDiv');

  brokerageRadios.forEach(radio => {
    radio.addEventListener('change', function() {
      if (this.value === 'Yes') {
        brokerageDetails.style.display = 'flex';
        brokerageDetails.style.flexWrap = 'wrap';
      } else {
        brokerageDetails.style.display = 'none';
        percentageExtraDiv.style.display = 'none';
        brokerageType.value = '';
      }
    });
  });

  // Show extra input if "Percentage" is selected
  brokerageType.addEventListener('change', function() {
    if (this.value === 'Percentage') {
      percentageExtraDiv.style.display = 'block';
    } else {
      percentageExtraDiv.style.display = 'none';
    }
  });
</script>


<script>
    // Show featured fields
    document.getElementById('featuredSelect').addEventListener('change', function() {
        if (this.value === 'Yes') {
            document.getElementById('featuredFields').style.display = 'block';
        } else {
            document.getElementById('featuredFields').style.display = 'none';
        }
    });

    // Show documents section if verified
    document.getElementById('verifiedProperty').addEventListener('change', function() {
        document.getElementById('documents-section').style.display = this.value === 'yes' ? 'block' : 'none';
    });

    // Automatically calculate Featured End Date
    document.getElementById('daysSelect').addEventListener('change', function() {
        const startDate = document.getElementById('startDate').value;
        const days = parseInt(this.value);
        if(startDate && days) {
            const start = new Date(startDate);
            start.setDate(start.getDate() + days);
            const yyyy = start.getFullYear();
            const mm = String(start.getMonth() + 1).padStart(2,'0');
            const dd = String(start.getDate()).padStart(2,'0');
            document.getElementById('endDate').value = `${yyyy}-${mm}-${dd}`;
        }
    });
</script>