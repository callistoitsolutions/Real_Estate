{% include "admin_user/admin_header.html" %}
{% load static %}

        <!-- Main Content -->
        <div class="main-content">
            <!-- Page Header -->
            <div class="page-header">
                <div class="page-header-content">
                    <h1 class="page-title"><i class="fas fa-tachometer-alt"></i> Sell Industrial Property Listings</h1>
                    <div class="page-actions">
                        <a href="{% url "industrial_resale" %}"><button class="btn-primary-custom">
                            <i class="fas fa-plus-circle"></i> Add Resale (Industrial) Property
                        </button></a>
                    </div>
                </div>
            </div>

            <!-- Statistics Cards -->

            <div class="stats-grid">
                <div class="stat-card primary">
                    <div class="stat-icon primary">
                        <i class="fas fa-home"></i>
                    </div>
                    <div class="stat-value">48</div>
                    <div class="stat-label">Total Properties</div>
                    <span class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> +12%
                    </span>
                </div>

                <div class="stat-card success">
                    <div class="stat-icon success">
                        <i class="fas fa-building"></i>
                    </div>
                    <div class="stat-value">32</div>
                    <div class="stat-label">Residential</div>
                    <span class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> +8%
                    </span>
                </div>

                <div class="stat-card warning">
                    <div class="stat-icon warning">
                        <i class="fas fa-briefcase"></i>
                    </div>
                    <div class="stat-value">12</div>
                    <div class="stat-label">Commercial</div>
                    <span class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> +5%
                    </span>
                </div>

                <div class="stat-card info">
                    <div class="stat-icon info">
                        <i class="fas fa-bed"></i>
                    </div>
                    <div class="stat-value">4</div>
                    <div class="stat-label">PG/Co-living</div>
                    <span class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> +15%
                    </span>
                </div>

                <div class="stat-card danger">
                    <div class="stat-icon danger" style="background: var(--success-gradient);">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-value">42</div>
                    <div class="stat-label">Active Listings</div>
                    <span class="stat-change positive">
                        <i class="fas fa-chart-line"></i> Good
                    </span>
                </div>

                <div class="stat-card success">
                    <div class="stat-icon success" style="background: var(--dark-gradient);">
                        <i class="fas fa-rupee-sign"></i>
                    </div>
                    <div class="stat-value">₹12.5L</div>
                    <div class="stat-label">Monthly Revenue</div>
                    <span class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> +20%
                    </span>
                </div>
            </div>


            <!-- Analytics Section with Charts -->
            <div class="analytics-section">
                <!-- Pie Chart - Property Distribution -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title"><i class="fas fa-chart-pie"></i> Property Distribution</h3>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="propertyPieChart"></canvas>
                    </div>
                </div>

                <!-- Bar Chart - Monthly Rental Income -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title"><i class="fas fa-chart-bar"></i> Monthly Rental Income</h3>
                        <div class="chart-filters">
                            <button class="filter-btn active">2026</button>
                            <button class="filter-btn">2025</button>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="rentalIncomeChart"></canvas>
                    </div>
                </div>

                <!-- Doughnut Chart - Occupancy Status -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title"><i class="fas fa-chart-pie"></i> Occupancy Status</h3>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="occupancyDoughnutChart"></canvas>
                    </div>
                </div>

                <!-- Bar Chart - Rent Range Distribution -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 class="chart-title"><i class="fas fa-chart-bar"></i> Rent Range Distribution</h3>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="rentRangeChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Quick Stats Section -->
            <div class="quick-stats">
                <h3 class="quick-stats-title"><i class="fas fa-chart-line"></i> Performance Insights</h3>
                <div class="stats-row">
                    <div class="stat-item">
                        <div class="stat-item-icon" style="color: #10b981;">
                            <i class="fas fa-user-check"></i>
                        </div>
                        <div class="stat-item-value">38</div>
                        <div class="stat-item-label">Total Tenants</div>
                    </div>

                    <div class="stat-item">
                        <div class="stat-item-icon" style="color: #3b82f6;">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stat-item-value">95%</div>
                        <div class="stat-item-label">Collection Rate</div>
                    </div>

                    <div class="stat-item">
                        <div class="stat-item-icon" style="color: #f59e0b;">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-item-value">3</div>
                        <div class="stat-item-label">Pending Payments</div>
                    </div>

                    <div class="stat-item">
                        <div class="stat-item-icon" style="color: #8b5cf6;">
                            <i class="fas fa-tools"></i>
                        </div>
                        <div class="stat-item-value">5</div>
                        <div class="stat-item-label">Maintenance Req</div>
                    </div>
                </div>
            </div>

            <!-- Properties Table -->
            <div class="properties-section">
                <div class="section-header">
                    <h3 class="section-title"><i class="fas fa-list"></i> Recent Property Listings</h3>
                </div>

                <div class="table-responsive">
                    <table class="properties-table">
                        <thead>
                            <tr>
                                <th>Image</th>
                                <th>Details</th>
                                <th>Type</th>
                                <th>Location</th>
                                <th>Monthly Rent</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=300&h=200&fit=crop" alt="Property" class="property-image">
                                </td>
                                <td>
                                    <div class="property-title">Luxurious 3BHK Apartment</div>
                                    <div class="property-subtitle">Apartment • 3 BHK</div>
                                </td>
                                <td>
                                    <span class="badge badge-residential">Residential</span>
                                </td>
                                <td>
                                    <i class="fas fa-map-marker-alt" style="color: #667eea;"></i>
                                    Dharampeth, Nagpur
                                </td>
                                <td>
                                    <div class="price-tag">₹25,000</div>
                                    <div class="price-period">/month</div>
                                </td>
                                <td>
                                    <span class="status-badge active">
                                        <i class="fas fa-circle" style="font-size: 0.4rem;"></i> Active
                                    </span>
                                </td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn-action btn-view" title="View">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn-action btn-edit" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn-action btn-toggle" title="Toggle">
                                            <i class="fas fa-power-off"></i>
                                        </button>
                                        <button class="btn-action btn-delete" title="Delete">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <img src="https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=300&h=200&fit=crop" alt="Property" class="property-image">
                                </td>
                                <td>
                                    <div class="property-title">Premium Office Space</div>
                                    <div class="property-subtitle">Commercial • 2000 sq.ft</div>
                                </td>
                                <td>
                                    <span class="badge badge-commercial">Commercial</span>
                                </td>
                                <td>
                                    <i class="fas fa-map-marker-alt" style="color: #667eea;"></i>
                                    MIHAN, Nagpur
                                </td>
                                <td>
                                    <div class="price-tag">₹50,000</div>
                                    <div class="price-period">/month</div>
                                </td>
                                <td>
                                    <span class="status-badge active">
                                        <i class="fas fa-circle" style="font-size: 0.4rem;"></i> Active
                                    </span>
                                </td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn-action btn-view" title="View">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn-action btn-edit" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn-action btn-toggle" title="Toggle">
                                            <i class="fas fa-power-off"></i>
                                        </button>
                                        <button class="btn-action btn-delete" title="Delete">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <img src="https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=300&h=200&fit=crop" alt="Property" class="property-image">
                                </td>
                                <td>
                                    <div class="property-title">Modern Girls PG Accommodation</div>
                                    <div class="property-subtitle">PG • Double/Triple Sharing</div>
                                </td>
                                <td>
                                    <span class="badge badge-pg">PG</span>
                                </td>
                                <td>
                                    <i class="fas fa-map-marker-alt" style="color: #667eea;"></i>
                                    Sadar, Nagpur
                                </td>
                                <td>
                                    <div class="price-tag">₹8,000</div>
                                    <div class="price-period">/month</div>
                                </td>
                                <td>
                                    <span class="status-badge active">
                                        <i class="fas fa-circle" style="font-size: 0.4rem;"></i> Active
                                    </span>
                                </td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn-action btn-view" title="View">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn-action btn-edit" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn-action btn-toggle" title="Toggle">
                                            <i class="fas fa-power-off"></i>
                                        </button>
                                        <button class="btn-action btn-delete" title="Delete">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <img src="https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w=300&h=200&fit=crop" alt="Property" class="property-image">
                                </td>
                                <td>
                                    <div class="property-title">Spacious 2BHK Flat</div>
                                    <div class="property-subtitle">Apartment • 2 BHK</div>
                                </td>
                                <td>
                                    <span class="badge badge-residential">Residential</span>
                                </td>
                                <td>
                                    <i class="fas fa-map-marker-alt" style="color: #667eea;"></i>
                                    Kamptee, Nagpur
                                </td>
                                <td>
                                    <div class="price-tag">₹15,000</div>
                                    <div class="price-period">/month</div>
                                </td>
                                <td>
                                    <span class="status-badge inactive">
                                        <i class="fas fa-circle" style="font-size: 0.4rem;"></i> Inactive
                                    </span>
                                </td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn-action btn-view" title="View">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn-action btn-edit" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn-action btn-toggle" title="Toggle">
                                            <i class="fas fa-power-off"></i>
                                        </button>
                                        <button class="btn-action btn-delete" title="Delete">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <img src="https://images.unsplash.com/photo-1497366216548-37526070297c?w=300&h=200&fit=crop" alt="Property" class="property-image">
                                </td>
                                <td>
                                    <div class="property-title">Co-working Office Space</div>
                                    <div class="property-subtitle">Commercial • 1500 sq.ft</div>
                                </td>
                                <td>
                                    <span class="badge badge-commercial">Commercial</span>
                                </td>
                                <td>
                                    <i class="fas fa-map-marker-alt" style="color: #667eea;"></i>
                                    Sitabuldi, Nagpur
                                </td>
                                <td>
                                    <div class="price-tag">₹35,000</div>
                                    <div class="price-period">/month</div>
                                </td>
                                <td>
                                    <span class="status-badge active">
                                        <i class="fas fa-circle" style="font-size: 0.4rem;"></i> Active
                                    </span>
                                </td>
                                <td>
                                    <div class="action-buttons">
                                        <button class="btn-action btn-view" title="View">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn-action btn-edit" title="Edit">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="btn-action btn-toggle" title="Toggle">
                                            <i class="fas fa-power-off"></i>
                                        </button>
                                        <button class="btn-action btn-delete" title="Delete">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Sidebar Toggle for Desktop and Mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            const windowWidth = window.innerWidth;

            if (windowWidth <= 768) {
                sidebar.classList.toggle('active');
                overlay.classList.toggle('active');
                document.body.style.overflow = sidebar.classList.contains('active') ? 'hidden' : '';
            } else {
                sidebar.classList.toggle('collapsed');
            }
        }

        // Close Sidebar (Mobile)
        function closeSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Submenu Toggle - FIXED VERSION FOR MOBILE
        function toggleSubmenu(event, element) {
            event.preventDefault();
            event.stopPropagation();
            
            const submenu = element.nextElementSibling;
            const allSubmenus = document.querySelectorAll('.submenu');
            const allDropdownLinks = document.querySelectorAll('.menu-link');
            
            allSubmenus.forEach(sub => {
                if (sub !== submenu) {
                    sub.classList.remove('active');
                }
            });

            allDropdownLinks.forEach(link => {
                if (link !== element) {
                    link.classList.remove('dropdown-open');
                }
            });
            
            submenu.classList.toggle('active');
            element.classList.toggle('dropdown-open');
            
            return false;
        }

        // PIE CHART - Property Distribution
        const pieCtx = document.getElementById('propertyPieChart').getContext('2d');
        const propertyPieChart = new Chart(pieCtx, {
            type: 'pie',
            data: {
                labels: ['Residential', 'Commercial', 'PG/Co-living'],
                datasets: [{
                    data: [32, 12, 4],
                    backgroundColor: [
                        'rgba(102, 126, 234, 0.8)',
                        'rgba(245, 87, 108, 0.8)',
                        'rgba(79, 172, 254, 0.8)'
                    ],
                    borderColor: [
                        'rgba(102, 126, 234, 1)',
                        'rgba(245, 87, 108, 1)',
                        'rgba(79, 172, 254, 1)'
                    ],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            usePointStyle: true,
                            padding: 15,
                            font: {
                                family: 'Poppins',
                                size: 11
                            }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                label += context.parsed + ' properties';
                                return label;
                            }
                        }
                    }
                }
            }
        });

        // BAR CHART - Monthly Rental Income
        const barCtx = document.getElementById('rentalIncomeChart').getContext('2d');
        const rentalIncomeChart = new Chart(barCtx, {
            type: 'bar',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [{
                    label: 'Rental Income (₹L)',
                    data: [9.5, 10.2, 11.5, 10.8, 11.8, 12.2, 12.5, 13.0, 11.9, 12.3, 12.8, 12.5],
                    backgroundColor: 'rgba(102, 126, 234, 0.7)',
                    borderColor: 'rgba(102, 126, 234, 1)',
                    borderWidth: 2,
                    borderRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: '#f3f4f6'
                        },
                        ticks: {
                            font: {
                                size: 10
                            },
                            callback: function(value) {
                                return '₹' + value + 'L';
                            }
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            font: {
                                size: 10
                            }
                        }
                    }
                }
            }
        });

        // DOUGHNUT CHART - Occupancy Status
        const doughnutCtx = document.getElementById('occupancyDoughnutChart').getContext('2d');
        const occupancyDoughnutChart = new Chart(doughnutCtx, {
            type: 'doughnut',
            data: {
                labels: ['Occupied', 'Vacant', 'Under Maintenance'],
                datasets: [{
                    data: [38, 6, 4],
                    backgroundColor: [
                        'rgba(16, 185, 129, 0.8)',
                        'rgba(251, 191, 36, 0.8)',
                        'rgba(239, 68, 68, 0.8)'
                    ],
                    borderColor: [
                        'rgba(16, 185, 129, 1)',
                        'rgba(251, 191, 36, 1)',
                        'rgba(239, 68, 68, 1)'
                    ],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            usePointStyle: true,
                            padding: 15,
                            font: {
                                family: 'Poppins',
                                size: 11
                            }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                label += context.parsed + ' properties';
                                return label;
                            }
                        }
                    }
                }
            }
        });

        // BAR CHART - Rent Range Distribution
        const rentCtx = document.getElementById('rentRangeChart').getContext('2d');
        const rentRangeChart = new Chart(rentCtx, {
            type: 'bar',
            data: {
                labels: ['<10K', '10-20K', '20-30K', '30-40K', '40-50K', '>50K'],
                datasets: [{
                    label: 'Properties',
                    data: [8, 14, 12, 8, 4, 2],
                    backgroundColor: [
                        'rgba(102, 126, 234, 0.7)',
                        'rgba(79, 172, 254, 0.7)',
                        'rgba(67, 233, 123, 0.7)',
                        'rgba(250, 112, 154, 0.7)',
                        'rgba(251, 191, 36, 0.7)',
                        'rgba(139, 92, 246, 0.7)'
                    ],
                    borderColor: [
                        'rgba(102, 126, 234, 1)',
                        'rgba(79, 172, 254, 1)',
                        'rgba(67, 233, 123, 1)',
                        'rgba(250, 112, 154, 1)',
                        'rgba(251, 191, 36, 1)',
                        'rgba(139, 92, 246, 1)'
                    ],
                    borderWidth: 2,
                    borderRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: '#f3f4f6'
                        },
                        ticks: {
                            font: {
                                size: 10
                            }
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            font: {
                                size: 10
                            }
                        }
                    }
                }
            }
        });

        // Filter buttons
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Close sidebar on window resize
        window.addEventListener('resize', function() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            const windowWidth = window.innerWidth;

            if (windowWidth > 768) {
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
                document.body.style.overflow = '';
            }
        });

        // Handle clicks on submenu links and regular menu links
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.submenu-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    if (window.innerWidth <= 768) {
                        setTimeout(() => {
                            closeSidebar();
                        }, 200);
                    }
                });
            });

            document.querySelectorAll('.menu-link').forEach(link => {
                if (!link.hasAttribute('onclick')) {
                    link.addEventListener('click', function(e) {
                        if (window.innerWidth <= 768) {
                            setTimeout(() => {
                                closeSidebar();
                            }, 200);
                        }
                    });
                }
            });
        });

        // Prevent body scroll when sidebar is open on mobile
        document.getElementById('sidebar').addEventListener('transitionend', function() {
            if (this.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            }
        });
    </script>

</body>
</html>
