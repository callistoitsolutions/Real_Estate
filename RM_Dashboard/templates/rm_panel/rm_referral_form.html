{% block content %}
<div class="container py-4">
  <h3>Submit Referral</h3>
  {% if messages %}
    {% for m in messages %}
      <div class="alert alert-{{ m.tags }}">{{ m }}</div>
    {% endfor %}
  {% endif %}

  <form method="post" enctype="multipart/form-data" class="card p-4">
    {% csrf_token %}
    <div class="row g-3">

      <div class="col-md-4">
        <label class="form-label">Referral Type</label>
        <select name="referral_type" class="form-select" required>
          <option value="">Select...</option>
          <option value="owner" {% if posted.referral_type == "owner" %}selected{% endif %}>Property Owner</option>
          <option value="tenant" {% if posted.referral_type == "tenant" %}selected{% endif %}>Tenant</option>
          <option value="new_rm" {% if posted.referral_type == "new_rm" %}selected{% endif %}>New RM</option>
          <option value="other" {% if posted.referral_type == "other" %}selected{% endif %}>Other Service</option>
        </select>
      </div>

      <div class="col-md-4">
        <label class="form-label">Referred Name</label>
        <input type="text" name="referred_name" class="form-control" value="{{ posted.referred_name|default:'' }}" required>
      </div>

      <div class="col-md-4">
        <label class="form-label">Referred Contact Number</label>
        <input type="text" name="referred_phone" class="form-control" value="{{ posted.referred_phone|default:'' }}" required>
      </div>

      <div class="col-md-4">
        <label class="form-label">Referred Email (optional)</label>
        <input type="email" name="referred_email" class="form-control" value="{{ posted.referred_email|default:'' }}">
      </div>

      <div class="col-12">
        <label class="form-label">Description</label>
        <textarea name="description" class="form-control" rows="3">{{ posted.description|default:'' }}</textarea>
      </div>

      <div class="col-md-6">
        <label class="form-label">Reference Document (optional)</label>
        <input type="file" name="document" class="form-control">
      </div>

      <div class="col-md-6">
        <label class="form-label">Expected Value (optional)</label>
        <input type="number" step="0.01" name="referral_value" class="form-control" value="{{ posted.referral_value|default:'' }}">
      </div>

      <div class="col-12 text-end">
        <button type="reset" class="btn btn-outline-secondary">Clear</button>
        <button type="submit" class="btn btn-primary">Submit Referral</button>
      </div>
    </div>
  </form>
</div>
{% endblock %}
