<!-- Button to assign -->
<button class="btn btn-primary assign-btn" data-lead-id="{{ lead.id }}">Assign</button>

<!-- Modal -->
<div class="modal fade" id="assignModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <form id="assignForm">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Assign Lead</h5>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="lead_id" name="lead_id">
          <div class="form-group">
            <label for="assignee">Assign To</label>
            <select class="form-control" id="assignee" name="assignee_id">
              <!-- Options populated by AJAX -->
            </select>
          </div>
          <div class="form-group">
            <label>Expires In (hours)</label>
            <input type="number" name="ttl_hours" value="72" class="form-control">
          </div>
          <div class="form-group">
            <label>Notes</label>
            <textarea name="notes" class="form-control"></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Assign</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </form>
  </div>
</div>
JS (jQuery) to open modal + send AJAX:
$('.assign-btn').on('click', function(){
  const leadId = $(this).data('lead-id');
  $('#lead_id').val(leadId);
  // fetch assignees list
  $.get('/crm/assignees/', function(data){
    let options = '';
    data.forEach(a => options += `<option value="${a.id}">${a.name} (${a.city})</option>`);
    $('#assignee').html(options);
    $('#assignModal').modal('show');
  });
});

$('#assignForm').on('submit', function(e){
  e.preventDefault();
  const payload = $(this).serialize();
  $.post('/crm/assign-lead/', payload, function(resp){
    if(resp.success){
      alert('Lead assigned successfully');
      $('#assignModal').modal('hide');
      location.reload(); // or update UI via JS
    } else {
      alert('Error: ' + resp.error);
    }
  });
});
